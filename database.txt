

-- Create the new Student table with modified structure
CREATE TABLE Student (
    ID VARCHAR(10) PRIMARY KEY,
    Name VARCHAR(250),
    BeginningYear INT,
    EndYear INT,
    Major VARCHAR(250),
    EducationQuality VARCHAR(10),
    Phone VARCHAR(10)
);


CREATE TABLE UserManagement (
    UserID INT AUTO_INCREMENT PRIMARY KEY,
    UserName VARCHAR(250),
    Password VARCHAR(255), -- Assuming you're storing hashed passwords
    ProfilePicture MEDIUMTEXT,
    Age INT,
    PhoneNumber VARCHAR(10),
    Status INT CHECK (Status IN (0, 1)), -- 0: Normal, 1: Blocked
    UserRole INT CHECK (UserRole IN (0, 1, 2)) -- 2: Admin, 0: Manager, 1: Employee
);

CREATE TABLE LoginHistory (
    LoginHistoryID INT AUTO_INCREMENT PRIMARY KEY,
    UserID INT,
    TimeLogin DATETIME,
    CONSTRAINT FK_LoginHistory_UserID FOREIGN KEY (UserID)
    REFERENCES UserManagement(UserID) ON DELETE CASCADE
);

-- Create the new CertificateManagement table with modified foreign key
CREATE TABLE CertificateManagement (
    CertificateID INT AUTO_INCREMENT PRIMARY KEY,
    StudentID VARCHAR(10),
    FOREIGN KEY (StudentID) REFERENCES Student(ID) ON DELETE CASCADE,
    CertificateName VARCHAR(250),
    IssueDate DATE,
    ExpiryDate DATE,
    Grade FLOAT 
);

    